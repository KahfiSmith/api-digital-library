@baseUrl = {{$dotenv API_BASE_URL}}
@token = {{$dotenv ACCESS_TOKEN}}
@token = {{token}}

### Get all notifications
GET {{baseUrl}}/notifications?page=1&limit=20
Authorization: Bearer {{token}}

### Get only unread notifications
GET {{baseUrl}}/notifications?unreadOnly=true&page=1&limit=10
Authorization: Bearer {{token}}

### Get unread count
GET {{baseUrl}}/notifications/unread-count
Authorization: Bearer {{token}}

### Mark notification as read
PATCH {{baseUrl}}/notifications/notification_id_here/read
Authorization: Bearer {{token}}

### Mark all notifications as read
PATCH {{baseUrl}}/notifications/read-all
Authorization: Bearer {{token}}

### Delete a notification
DELETE {{baseUrl}}/notifications/notification_id_here
Authorization: Bearer {{token}}

### Delete all notifications
DELETE {{baseUrl}}/notifications
Authorization: Bearer {{token}}

### Create system announcement (admin/librarian only)
POST {{baseUrl}}/notifications/system-announcement
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "title": "Library Maintenance Notice",
  "message": "The library will be closed for maintenance on Sunday, December 10th from 9 AM to 6 PM. All digital services will remain available."
}

### Create custom notification (admin/librarian only)
POST {{baseUrl}}/notifications/custom
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "userId": "user_id_here",
  "type": "BOOK_DUE_REMINDER",
  "title": "Book Due Reminder",
  "message": "Your book 'JavaScript: The Good Parts' is due tomorrow. Please return it on time.",
  "metadata": {
    "bookId": "book_id_here",
    "loanId": "loan_id_here",
    "dueDate": "2024-01-15T00:00:00.000Z"
  }
}

### Test invalid notification type (should fail with 400)
POST {{baseUrl}}/api/v1/notifications/custom
Content-Type: application/json

{
  "userId": "user_id_here",
  "type": "INVALID_TYPE",
  "title": "Test",
  "message": "Test message"
}

### Test missing required fields (should fail with 400)
POST {{baseUrl}}/api/v1/notifications/system-announcement
Content-Type: application/json

{
  "title": "Missing message field"
}
