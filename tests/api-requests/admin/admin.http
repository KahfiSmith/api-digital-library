@baseUrl = {{$dotenv API_BASE_URL}}
@token = {{$dotenv ACCESS_TOKEN}}
@token = {{token}}

### Admin: Stats
GET {{baseUrl}}/admin/stats
Authorization: Bearer {{token}}

### Admin: List users (save first user id)
GET {{baseUrl}}/admin/users?limit=5
Authorization: Bearer {{token}}

> {%
try {
  if (response.status === 200) {
    const body = JSON.parse(response.body);
    const users = body?.data || body?.users || [];
    if (Array.isArray(users) && users.length > 0) {
      client.global.set("admin_user_id", users[0].id);
      client.log("Saved admin_user_id=" + users[0].id);
    }
  }
} catch (e) {}
%}

### Admin: Update user status (toggle)
PUT {{baseUrl}}/admin/users/{{admin_user_id}}/status
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "isActive": false
}

### Admin: Recent activity
GET {{baseUrl}}/admin/recent?limit=5
Authorization: Bearer {{token}}

### Admin: Health
GET {{baseUrl}}/admin/health
Authorization: Bearer {{token}}
